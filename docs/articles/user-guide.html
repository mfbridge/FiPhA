<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="FiPhA">
<title>user-guide • FiPhA</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="user-guide">
<meta property="og:description" content="FiPhA">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FiPhA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/user-guide.html">user-guide</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>user-guide</h1>
            
      
      
      <div class="d-none name"><code>user-guide.Rmd</code></div>
    </div>

    
    
<ul>
<li><a href="#intro">Introduction</a></li>
<li>
<a href="#install">Installation</a>
<ul>
<li><a href="#issue1">Issue: namespace ‘x’ is already loaded</a></li>
</ul>
</li>
<li><a href="#start">Getting started</a></li>
<li>
<a href="#import">Importing datasets</a>
<ul>
<li><a href="#import-csv">Time series data (*.csv, *.xlsx)</a></li>
<li>
<a href="#import-spec">Tab-delimited spectrometer recordings
(*.txt)</a>
<ul>
<li><a href="#import-stat">Summary statistic method</a></li>
<li><a href="#import-linear">Linear unmixing algorithm</a></li>
</ul>
</li>
<li><a href="#import-tdt">Lock-in demodulation data (*.tsq,
*.tsv)</a></li>
</ul>
</li>
<li>
<a href="#data">Data processing</a>
<ul>
<li><a href="#data-align">Temporal alignment of datasets</a></li>
<li><a href="#data-detrend">Detrending/photobleaching
compensation</a></li>
<li><a href="#data-rescale">Linear rescaling</a></li>
<li>
<a href="#data-custom">Custom scripts</a>
<ul>
<li><a href="#data-custom1">Example: ratio of two variables and integer
scaling</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#event">Event identification</a>
<ul>
<li>
<a href="#event-signal">Signal types</a>
<ul>
<li><a href="#event-binary">Binary signal</a></li>
<li><a href="#event-binned">Equally-spaced bins</a></li>
<li><a href="#event-timestamp">Fixed timestamps</a></li>
</ul>
</li>
<li>
<a href="#event-filter">Filters</a>
<ul>
<li><a href="#event-filter-cond">Conditional expression</a></li>
<li><a href="#event-filter1">Drop/keep first/last N events</a></li>
<li><a href="#event-filter2">Shift all events by X (sec)</a></li>
<li><a href="#event-filter3">Pad to minimum X (sec)</a></li>
<li><a href="#event-filter4">Limit at maximum X (sec)</a></li>
<li><a href="#event-filter5">Drop if shorter/longer than X
(sec)</a></li>
<li><a href="#event-filter6">Aggregate if within X (sec)</a></li>
<li><a href="#event-filter7">Aggregate if overlapping</a></li>
<li><a href="#event-filter8">Keep if N within X (sec)</a></li>
<li><a href="#event-filter9">Include events before/after X
(sec)</a></li>
<li><a href="#event-filter10">Drop if within X (sec)</a></li>
</ul>
</li>
<li>
<a href="#event-normal">Normalizations</a>
<ul>
<li><a href="#event-z">Z score</a></li>
<li><a href="#event-robust">Robust z score</a></li>
<li><a href="#event-delta">Delta-F over F</a></li>
</ul>
</li>
<li>
<a href="#event-intervals">Intervals</a>
<ul>
<li><a href="#event-intervals-before1">Before event</a></li>
<li><a href="#event-intervals-before2">Before event,
non-overlapping</a></li>
<li><a href="#event-intervals-event">Event signal</a></li>
<li><a href="#event-intervals-after">After event</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section level2">
<h2 id="intro">Introduction<a class="anchor" aria-label="anchor" href="#intro"></a>
</h2>
<p>FiPhA (<strong>Fi</strong>ber <strong>Ph</strong>otometry
<strong>A</strong>nalysis) is a suite of tools for interactively
exploring and visualizing fiber photometry datasets in context of
event-based neurobehavior experiments. It is capable of importing and
processing data from a variety of fiber photometry systems, such as
those which are camera-based (e.g., Plexon), utilize a lock-in
demodulation method (e.g., Tucker-Davis Technologies), or are
spectrometer-based setups.</p>
<p>Intervals of interest surrounding arbitrary events can be defined
using a flexible system which assigns named intervals to regions
relative to each event, which can then be processed and visualized in
order to investigate differences in fiber photometry responses relative
to the event in question.</p>
<p>Processed datasets, graphics, analysis results, and summary tables
can be exported at various stages for further use within R using the
FiPhA session objects (a structured list() of datasets that represent
the internal state of FiPhA), or more generally via CSV and formatted
Excel output files for import and manipulation by hand or in other
software.</p>
</div>
<div class="section level2">
<h2 id="install">Installation<a class="anchor" aria-label="anchor" href="#install"></a>
</h2>
<p>FiPhA was developed using R v4.2.x and RStudio v2023.x.</p>
<p>You can install the latest development version directly from GitHub
using the devtools package in RStudio with the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install devtools if not already</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># download and install FiPhA package from github</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"mfbridge/FiPhA@pkg"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="issue1">Issue: namespace ‘x’ is already loaded<a class="anchor" aria-label="anchor" href="#issue1"></a>
</h3>
<p>Depending on the R version installed, packages that are both
automatically loaded by RStudio and which are sub-dependencies of
FiPhA’s (e.g., rlang, xfun, etc.) may be too out of date for FiPhA’s
dependencies but fail to update when navigating to Tools → Check for
Package Updates…, resulting in errors like the following:</p>
<pre><code>Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) :
  namespace ‘rlang’ 1.0.2 is already loaded, but &gt;= 1.0.6 is required</code></pre>
<p>Since these packages are always in use within RStudio, they may need
to be updated externally using the plain R GUI (in Windows, this is
found under the Start Menu entry for R and is entitled something like “R
4.2.3”). Once RGui has been opened, packages may be updated by
navigating to Packages → Update packages…, or by entering
<code><a href="https://rdrr.io/r/utils/update.packages.html" class="external-link">update.packages()</a></code> in the console.</p>
<p>[Windows] Packages on CRAN may occasionally have newer versions
available in source form compared to it’s latest binary release. It is
not required to build and install any dependencies from source when
installing FiPhA. Warnings about Rtools not being installed can be
safely ignored.</p>
</div>
</div>
<div class="section level2">
<h2 id="start">Getting started<a class="anchor" aria-label="anchor" href="#start"></a>
</h2>
<p>Once FiPhA has been installed, it can be started within RStudio from
the Addins menu (Addins → FiPhA → Start FiPhA), or via the console:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">FiPhA</span><span class="fu">::</span><span class="fu"><a href="../reference/FiPhA.html">FiPhA</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="import">Importing datasets<a class="anchor" aria-label="anchor" href="#import"></a>
</h2>
<p>A variety of dataset formats are supported which do not require any
additional processing prior to loading via the ‘Import’ drop down menu:
time series datasets in the form of *.csv (comma separated values) or
*.xlsx (Microsoft Excel) files, raw tab-delimited (*.txt) spectrometer
recordings, as well as lock-in demodulation data in the form of binary
*.tsq/*.tsv files from Tucker-Davis Technologies’ fiber photometry
system.</p>
<p>Previous sessions (saved via the Export tab) may also be re-loaded
using this menu, in addition to a sample dataset that has been bundled
with FiPhA which contains a selection of data from both an auditory
tone-based experiment and running wheel experiment.</p>
<div class="section level3">
<h3 id="import-csv">Time series data (*.csv, *.xlsx)<a class="anchor" aria-label="anchor" href="#import-csv"></a>
</h3>
<p>One or more comma-separated values or Microsoft Excel Workbooks which
share a consistent format may be loaded at once by specifying their
header row, first data row, sheet number (Excel only), and observation
frequency (in Hz). This format is intended for time series data that has
already been processed or from systems that export directly to these
(such as Plexon’s camera-based system).</p>
</div>
<div class="section level3">
<h3 id="import-spec">Tab-delimited spectrometer recordings (*.txt)<a class="anchor" aria-label="anchor" href="#import-spec"></a>
</h3>
<p>Spectrometer-based systems which export raw spectral data as
tab-delimited recordings require additional processing to derive
fluorescent signal data. The expected format of this data consists of
tabbed columns of wavelength intensity measurements over time (it is
also assumed the first column is a timestamp).</p>
<p>Similar to time series data, this format requires specifying header
and data row numbers in addition to observation frequency and a method
of processing raw spectra. Available choices for this task are a linear
unmixing algorithm (for instances where a normalized reference spectra
are available), as well as a summary statistic method that allows users
to choose ranges of wavelengths to summarize by taking their mean
response amplitude.</p>
<div class="section level4">
<h4 id="import-stat">Summary statistic method<a class="anchor" aria-label="anchor" href="#import-stat"></a>
</h4>
<p>This method of decomposing raw spectra into usable time series allows
for arbitrary selection of up to two wavelength ranges, calculating
either their integrated area under the curve, mean response, or median
response. A preview window allows visualization of these ranges and
includes options for automatically calculating their ratio or choosing a
detrending method to compensate for fluorophore photobleaching (this
step may also be performed at a later stage with additional options
available).</p>
<p>For example, tdTomato’s peak emission occurs at 581 nm, and thus a
range of 576-586 nm may be suitable for capturing changes in its
fluorescence.</p>
</div>
<div class="section level4">
<h4 id="import-linear">Linear unmixing algorithm<a class="anchor" aria-label="anchor" href="#import-linear"></a>
</h4>
<p>A linear unmixing algorithm as described by Meng et al., is also
available to process spectrally-resolved data. Given a normalized
reference spectra of a fluorescent response, it decomposes a spectral
recording into a univariate time series by taking the linear regression
coefficients of the reference fitted at each point in time.</p>
</div>
</div>
<div class="section level3">
<h3 id="import-tdt">Lock-in demodulation data<a class="anchor" aria-label="anchor" href="#import-tdt"></a>
</h3>
<p>Data from Tucker-Davis Technologies’ lock-in demodulation fiber
photometry systems are stored in a binary format along with a directory
of metadata files. An implementation of code capable of directly reading
this data is available as part of FiPhA which does not depend on any
additional software, although its capabilities are currently limited to
features of the format that are relevant to the data streams involved in
a fiber photometry recording.</p>
<p>After selecting a directory containing a pair of *.tsq and *.tsv
files (other *.tXX files are not currently used) the user is presented
with a list of available data streams depending on what was saved, such
as the individual intensity channels of the recorded wavelengths (e.g.,
405 nm, 465 nm, 560 nm, etc.) and LED driver channels.</p>
</div>
</div>
<div class="section level2">
<h2 id="data">Data processing<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>Once imported, one or more transformations may be applied to each
dataset via the Transform menu. Standard data manipulations such as
subsetting, appending rows, down-sampling, rescaling, and applying
low-pass filters are available. Tasks more specific to problems
encountered with fiber photometry data are also available, such as
temporally aligning a simultaneous recording and de-trending to
compensate for photobleaching phenomena.</p>
<div class="section level3">
<h3 id="data-align">Temporal alignment of datasets<a class="anchor" aria-label="anchor" href="#data-align"></a>
</h3>
<p>Datasets from other sources may be unsynchronized or have been
recorded at a different observation frequency. FiPhA allows users to
temporally align datasets, joining variables from other recordings
across time. No interpolation is performed, selecting the nearest
neighbor when down-/up-sampling.</p>
</div>
<div class="section level3">
<h3 id="data-detrend">Detrending/photobleaching compensation]<a class="anchor" aria-label="anchor" href="#data-detrend"></a>
</h3>
<p>When dealing with fluorescent indicators, a gradual decay in the
excited light received is often observed and is compensated for by the
removal of a fitted decay trend.</p>
<p>Available choices are linear or a nonlinear exponental decay model,
and options exist to control output column(s) created by centering
around zero or exporting model fits.</p>
</div>
<div class="section level3">
<h3 id="data-rescale">Linear rescaling<a class="anchor" aria-label="anchor" href="#data-rescale"></a>
</h3>
<p>Transforming the scale of one variable to that of another by applying
a linear transformation.</p>
</div>
<div class="section level3">
<h3 id="data-custom">Custom scripts<a class="anchor" aria-label="anchor" href="#data-custom"></a>
</h3>
<p>For instances where more complex functionality is required, users may
develop R scripts to apply custom transformations. The code is executed
in a blank environment where a <code>dt</code> variable is pre-populated
with the loaded dataset in question, and at the end of execution its
contents replace that of the selected dataset. Since FiPhA utilizes the
data.table package, many common transformations can be performed in one
liners:</p>
<div class="section level4">
<h4 id="data-custom1">Example: ratio of two variables and integer scaling<a class="anchor" aria-label="anchor" href="#data-custom1"></a>
</h4>
<p>Given two variables, calculating their ratios and creating a third
column can be easily performed using an appropriate data.table
syntax:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># dt is an existing object in this environment.</span></span>
<span></span>
<span><span class="co"># each column can be referenced like a normal dataset variable</span></span>
<span><span class="co"># in addition to a `(time)` column. names with spaces or</span></span>
<span><span class="co"># special characters need to be quoted with backticks (`)</span></span>
<span><span class="co"># := is an assignment operator within a data.table</span></span>
<span></span>
<span><span class="va">dt</span><span class="op">[</span>, <span class="va">`new ratio`</span> <span class="op">:=</span> <span class="va">`numerator variable`</span> <span class="op">/</span> <span class="va">denominator</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># similarly, scaling a variable by some constant:</span></span>
<span><span class="va">dt</span><span class="op">[</span>, <span class="va">value</span> <span class="op">:=</span> <span class="va">value</span> <span class="op">/</span> <span class="fl">2</span><span class="op">^</span><span class="fl">16</span><span class="op">]</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="event">Event identification<a class="anchor" aria-label="anchor" href="#event"></a>
</h2>
<p>Processing datasets into series of events for subsequent analysis
requires the user to specify an event definition. This is done by
selecting the signal type, which can be one of: a binary signal, an
equally-spaced bin, or list of fixed timestamps; applying optional
filters to remove spurious events or condition them on other variables;
describing intervals of interest relative to the event in question; and
finally choosing a normalization to be applied.</p>
<div class="section level3">
<h3 id="event-signal">Signal types<a class="anchor" aria-label="anchor" href="#event-signal"></a>
</h3>
<div class="section level4">
<h4 id="event-binary">Binary signal<a class="anchor" aria-label="anchor" href="#event-binary"></a>
</h4>
<p>A binary signal definition is useful for when a dataset column
contains a logical binary (0/1) signal whose initial rising edge defines
the start of an event, which lasts until the falling edge of the signal
the defines its end. This is often behavior data or an event pulse from
an external hardware device.</p>
</div>
<div class="section level4">
<h4 id="event-binned">Equally-spaced bins<a class="anchor" aria-label="anchor" href="#event-binned"></a>
</h4>
<p>Separation of a dataset into equally spaced bins is done by
specifying the t<sub>0</sub> starting point of the first bin and their
length.</p>
</div>
<div class="section level4">
<h4 id="event-timestamp">Fixed timestamps<a class="anchor" aria-label="anchor" href="#event-timestamp"></a>
</h4>
<p>Users may enter a list of start and end times to define a set of
events for instances where their occurrence is fixed in time.</p>
</div>
</div>
<div class="section level3">
<h3 id="event-filter">Filters<a class="anchor" aria-label="anchor" href="#event-filter"></a>
</h3>
<p>Optionally, one or more filters can be applied to the “raw” events
derived from the specified event signal. These can condition events
based on dataset variables, keep or remove based on order or time,
aggregate a spuriously firing series of event signals into a single
block, and more in order to filter out spurious and unwanted events in a
systematic fashion.</p>
<p>In the case of the filter list, new rows can be added via the right
click menu.</p>
<div class="section level4">
<h4 id="event-filter-cond">Conditional expression<a class="anchor" aria-label="anchor" href="#event-filter-cond"></a>
</h4>
<p>Limiting event identification to a range that is determined by the
values of particular variables is performed using any valid R
expression, where dataset variable names are variables (those containing
spaces or special characters need to be quoted with
`<code>\</code>backticks/grave accents```), and at least one row (by
default) or all observations within a block of observations must meet
the criteria to pass as a valid event.</p>
</div>
<div class="section level4">
<h4 id="event-filter1">Drop/keep first/last N event<a class="anchor" aria-label="anchor" href="#event-filter1"></a>
</h4>
<p>Excludes or includes only the first/last N events in the series.</p>
</div>
<div class="section level4">
<h4 id="event-filter2">Shift all events by X (sec)<a class="anchor" aria-label="anchor" href="#event-filter2"></a>
</h4>
<p>Adds a constant time to all start/end times.</p>
</div>
<div class="section level4">
<h4 id="event-filter3">Pad to minimum X (sec)<a class="anchor" aria-label="anchor" href="#event-filter3"></a>
</h4>
<p>If an event is shorter than X seconds, it is padded so that it lasts
a minimum of X seconds.</p>
</div>
<div class="section level4">
<h4 id="event-filter4">Limit at maximum X (sec)<a class="anchor" aria-label="anchor" href="#event-filter4"></a>
</h4>
<p>Events are capped at a maximum of X seconds, and no interleaved
events are created to fill longer periods.</p>
</div>
<div class="section level4">
<h4 id="event-filter5">Drop if shorter/longer than X (sec)<a class="anchor" aria-label="anchor" href="#event-filter5"></a>
</h4>
<p>Exclusion based on event length.</p>
</div>
<div class="section level4">
<h4 id="event-filter6">Aggregate if within X (sec)<a class="anchor" aria-label="anchor" href="#event-filter6"></a>
</h4>
<p>If a subsequent event occurs within X seconds of a previous event,
they are replaced by a single event lasting up to their total span +
X.</p>
</div>
<div class="section level4">
<h4 id="event-filter7">Aggregate if overlapping<a class="anchor" aria-label="anchor" href="#event-filter7"></a>
</h4>
<p>If an event starts before a previous one ends, both are coalesced
into one larger event, can occur via fixed events or filters.</p>
</div>
<div class="section level4">
<h4 id="event-filter8">Keep if N within X (sec)<a class="anchor" aria-label="anchor" href="#event-filter8"></a>
</h4>
<p>Keep an event if N are occurring within X seconds of it’s start time,
excluding those below a certain rate.</p>
</div>
<div class="section level4">
<h4 id="event-filter9">Include events before/after X (sec)<a class="anchor" aria-label="anchor" href="#event-filter9"></a>
</h4>
<p>Exclusion based on timestamp.</p>
</div>
<div class="section level4">
<h4 id="event-filter10">Drop if within X (sec)<a class="anchor" aria-label="anchor" href="#event-filter10"></a>
</h4>
<p>If an event occurs within X seconds of the end of the previous, it is
removed.</p>
</div>
</div>
<div class="section level3">
<h3 id="event-normal">Normalizations<a class="anchor" aria-label="anchor" href="#event-normal"></a>
</h3>
<p>A selection of normalizations are available, as certain ones may be
more appropriate under particular circumstances. Each normalization is
applied only to data that fall within the bounds of intervals defined
for an event.</p>
<div class="section level4">
<h4 id="event-z">Z score<a class="anchor" aria-label="anchor" href="#event-z"></a>
</h4>
<p>Standard z score referenced to a baseline period.</p>
</div>
<div class="section level4">
<h4 id="event-robust">Robust Z<a class="anchor" aria-label="anchor" href="#event-robust"></a>
</h4>
<p>A more robust z score-like value whose calculation is median based.
Slightly harder to interpret.</p>
</div>
<div class="section level4">
<h4 id="event-delta">Delta-F over F<a class="anchor" aria-label="anchor" href="#event-delta"></a>
</h4>
<p>A change from baseline calculation expressed as a percentage of the
baseline value.</p>
</div>
</div>
<div class="section level3">
<h3 id="event-intervals">Intervals<a class="anchor" aria-label="anchor" href="#event-intervals"></a>
</h3>
<p>Intervals of interest may be assigned using the table available in
the event creation dialog where they are defined by: a name, type of
interval (reference point), and possibly start/end times.</p>
<div class="section level4">
<h4 id="event-intervals-before1">Before event<a class="anchor" aria-label="anchor" href="#event-intervals-before1"></a>
</h4>
<p>An interval of this type is referenced to the start of an event, so
that by setting its start value to a negative number and its end value
to a zero it defines an interval occurring directly prior to the actual
event.</p>
</div>
<div class="section level4">
<h4 id="event-intervals-before2">Before event, non-overlapping<a class="anchor" aria-label="anchor" href="#event-intervals-before2"></a>
</h4>
<p>Similar to the above, but if an event’s interval defined using this
type would happen to overlap with a previous event (whether the actual
event or an interval defined post-event), it is shortened so that it
does not overlap.</p>
</div>
<div class="section level4">
<h4 id="event-intervals-event">Event signal<a class="anchor" aria-label="anchor" href="#event-intervals-event"></a>
</h4>
<p>This interval refers to the raw event signal that defines the given
event post-filtering.</p>
</div>
<div class="section level4">
<h4 id="event-intervals-after">After event<a class="anchor" aria-label="anchor" href="#event-intervals-after"></a>
</h4>
<p>This interval is referenced to the end of an event, so that with a
start time of zero and end time of some positive number it defines an
interval occurring immediately after an event stops.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matt Bridge.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
