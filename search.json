[{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"intro","dir":"Articles","previous_headings":"","what":"Introduction","title":"user-guide","text":"FiPhA (Fiber Photometry Analysis) suite tools interactively exploring visualizing fiber photometry datasets context event-based neurobehavior experiments. capable importing processing data variety fiber photometry systems, camera-based (e.g., Plexon), utilize lock-demodulation method (e.g., Tucker-Davis Technologies), spectrometer-based setups. Intervals interest surrounding arbitrary events can defined using flexible system assigns named intervals regions relative event, can processed visualized order investigate differences fiber photometry responses relative event question. Processed datasets, graphics, analysis results, summary tables can exported various stages use within R using FiPhA session objects (structured list() datasets represent internal state FiPhA), generally via CSV formatted Excel output files import manipulation hand software.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"install","dir":"Articles","previous_headings":"","what":"Installation","title":"user-guide","text":"FiPhA developed using R v4.2.x RStudio v2023.x. can install latest development version directly GitHub using devtools package RStudio following commands:","code":"# install devtools if not already install.packages(\"devtools\")  # download and install FiPhA package from github devtools::install_github(\"mfbridge/FiPhA@pkg\")"},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"issue1","dir":"Articles","previous_headings":"Installation","what":"Issue: namespace ‘x’ is already loaded","title":"user-guide","text":"Depending R version installed, packages automatically loaded RStudio sub-dependencies FiPhA’s (e.g., rlang, xfun, etc.) may date FiPhA’s dependencies fail update navigating Tools → Check Package Updates…, resulting errors like following: Since packages always use within RStudio, may need updated externally using plain R GUI (Windows, found Start Menu entry R entitled something like “R 4.2.3”). RGui opened, packages may updated navigating Packages → Update packages…, entering update.packages() console. [Windows] Packages CRAN may occasionally newer versions available source form compared ’s latest binary release. required build install dependencies source installing FiPhA. Warnings Rtools installed can safely ignored.","code":"Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) :   namespace ‘rlang’ 1.0.2 is already loaded, but >= 1.0.6 is required"},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"start","dir":"Articles","previous_headings":"","what":"Getting started","title":"user-guide","text":"FiPhA installed, can started within RStudio Addins menu (Addins → FiPhA → Start FiPhA), via console:","code":"FiPhA::FiPhA()"},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"import","dir":"Articles","previous_headings":"","what":"Importing datasets","title":"user-guide","text":"variety dataset formats supported require additional processing prior loading via ‘Import’ drop menu: time series datasets form *.csv (comma separated values) *.xlsx (Microsoft Excel) files, raw tab-delimited (*.txt) spectrometer recordings, well lock-demodulation data form binary *.tsq/*.tsv files Tucker-Davis Technologies’ fiber photometry system. Previous sessions (saved via Export tab) may also re-loaded using menu, addition sample dataset bundled FiPhA contains selection data auditory tone-based experiment running wheel experiment.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"import-csv","dir":"Articles","previous_headings":"Importing datasets","what":"Time series data (*.csv, *.xlsx)","title":"user-guide","text":"One comma-separated values Microsoft Excel Workbooks share consistent format may loaded specifying header row, first data row, sheet number (Excel ), observation frequency (Hz). format intended time series data already processed systems export directly (Plexon’s camera-based system).","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"import-spec","dir":"Articles","previous_headings":"Importing datasets","what":"Tab-delimited spectrometer recordings (*.txt)","title":"user-guide","text":"Spectrometer-based systems export raw spectral data tab-delimited recordings require additional processing derive fluorescent signal data. expected format data consists tabbed columns wavelength intensity measurements time (also assumed first column timestamp). Similar time series data, format requires specifying header data row numbers addition observation frequency method processing raw spectra. Available choices task linear unmixing algorithm (instances normalized reference spectra available), well summary statistic method allows users choose ranges wavelengths summarize taking mean response amplitude.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"import-stat","dir":"Articles","previous_headings":"Importing datasets > Tab-delimited spectrometer recordings (*.txt)","what":"Summary statistic method","title":"user-guide","text":"method decomposing raw spectra usable time series allows arbitrary selection two wavelength ranges, calculating either integrated area curve, mean response, median response. preview window allows visualization ranges includes options automatically calculating ratio choosing detrending method compensate fluorophore photobleaching (step may also performed later stage additional options available). example, tdTomato’s peak emission occurs 581 nm, thus range 576-586 nm may suitable capturing changes fluorescence.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"import-linear","dir":"Articles","previous_headings":"Importing datasets > Tab-delimited spectrometer recordings (*.txt)","what":"Linear unmixing algorithm","title":"user-guide","text":"linear unmixing algorithm described Meng et al., also available process spectrally-resolved data. Given normalized reference spectra fluorescent response, decomposes spectral recording univariate time series taking linear regression coefficients reference fitted point time.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"import-tdt","dir":"Articles","previous_headings":"Importing datasets","what":"Lock-in demodulation data","title":"user-guide","text":"Data Tucker-Davis Technologies’ lock-demodulation fiber photometry systems stored binary format along directory metadata files. implementation code capable directly reading data available part FiPhA depend additional software, although capabilities currently limited features format relevant data streams involved fiber photometry recording. selecting directory containing pair *.tsq *.tsv files (*.tXX files currently used) user presented list available data streams depending saved, individual intensity channels recorded wavelengths (e.g., 405 nm, 465 nm, 560 nm, etc.) LED driver channels.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"data","dir":"Articles","previous_headings":"","what":"Data processing","title":"user-guide","text":"imported, one transformations may applied dataset via Transform menu. Standard data manipulations subsetting, appending rows, -sampling, rescaling, applying low-pass filters available. Tasks specific problems encountered fiber photometry data also available, temporally aligning simultaneous recording de-trending compensate photobleaching phenomena.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"data-align","dir":"Articles","previous_headings":"Data processing","what":"Temporal alignment of datasets","title":"user-guide","text":"Datasets sources may unsynchronized recorded different observation frequency. FiPhA allows users temporally align datasets, joining variables recordings across time. interpolation performed, selecting nearest neighbor -/-sampling.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"data-detrend","dir":"Articles","previous_headings":"Data processing","what":"Detrending/photobleaching compensation]","title":"user-guide","text":"dealing fluorescent indicators, gradual decay excited light received often observed compensated removal fitted decay trend. Available choices linear nonlinear exponental decay model, options exist control output column(s) created centering around zero exporting model fits.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"data-rescale","dir":"Articles","previous_headings":"Data processing","what":"Linear rescaling","title":"user-guide","text":"Transforming scale one variable another applying linear transformation.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"data-custom","dir":"Articles","previous_headings":"Data processing","what":"Custom scripts","title":"user-guide","text":"instances complex functionality required, users may develop R scripts apply custom transformations. code executed blank environment dt variable pre-populated loaded dataset question, end execution contents replace selected dataset. Since FiPhA utilizes data.table package, many common transformations can performed one liners:","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"data-custom1","dir":"Articles","previous_headings":"Data processing > Custom scripts","what":"Example: ratio of two variables and integer scaling","title":"user-guide","text":"Given two variables, calculating ratios creating third column can easily performed using appropriate data.table syntax:","code":"# dt is an existing object in this environment.  # each column can be referenced like a normal dataset variable # in addition to a `(time)` column. names with spaces or # special characters need to be quoted with backticks (`) # := is an assignment operator within a data.table  dt[, `new ratio` := `numerator variable` / denominator]  # similarly, scaling a variable by some constant: dt[, value := value / 2^16]"},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event","dir":"Articles","previous_headings":"","what":"Event identification","title":"user-guide","text":"Processing datasets series events subsequent analysis requires user specify event definition. done selecting signal type, can one : binary signal, equally-spaced bin, list fixed timestamps; applying optional filters remove spurious events condition variables; describing intervals interest relative event question; finally choosing normalization applied.","code":""},{"path":[]},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-binary","dir":"Articles","previous_headings":"Event identification > Signal types","what":"Binary signal","title":"user-guide","text":"binary signal definition useful dataset column contains logical binary (0/1) signal whose initial rising edge defines start event, lasts falling edge signal defines end. often behavior data event pulse external hardware device.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-binned","dir":"Articles","previous_headings":"Event identification > Signal types","what":"Equally-spaced bins","title":"user-guide","text":"Separation dataset equally spaced bins done specifying t0 starting point first bin length.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-timestamp","dir":"Articles","previous_headings":"Event identification > Signal types","what":"Fixed timestamps","title":"user-guide","text":"Users may enter list start end times define set events instances occurrence fixed time.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter","dir":"Articles","previous_headings":"Event identification","what":"Filters","title":"user-guide","text":"Optionally, one filters can applied “raw” events derived specified event signal. can condition events based dataset variables, keep remove based order time, aggregate spuriously firing series event signals single block, order filter spurious unwanted events systematic fashion. case filter list, new rows can added via right click menu.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter-cond","dir":"Articles","previous_headings":"Event identification > Filters","what":"Conditional expression","title":"user-guide","text":"Limiting event identification range determined values particular variables performed using valid R expression, dataset variable names variables (containing spaces special characters need quoted `\\backticks/grave accents```), least one row (default) observations within block observations must meet criteria pass valid event.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter1","dir":"Articles","previous_headings":"Event identification > Filters","what":"Drop/keep first/last N event","title":"user-guide","text":"Excludes includes first/last N events series.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter2","dir":"Articles","previous_headings":"Event identification > Filters","what":"Shift all events by X (sec)","title":"user-guide","text":"Adds constant time start/end times.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter3","dir":"Articles","previous_headings":"Event identification > Filters","what":"Pad to minimum X (sec)","title":"user-guide","text":"event shorter X seconds, padded lasts minimum X seconds.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter4","dir":"Articles","previous_headings":"Event identification > Filters","what":"Limit at maximum X (sec)","title":"user-guide","text":"Events capped maximum X seconds, interleaved events created fill longer periods.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter5","dir":"Articles","previous_headings":"Event identification > Filters","what":"Drop if shorter/longer than X (sec)","title":"user-guide","text":"Exclusion based event length.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter6","dir":"Articles","previous_headings":"Event identification > Filters","what":"Aggregate if within X (sec)","title":"user-guide","text":"subsequent event occurs within X seconds previous event, replaced single event lasting total span + X.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter7","dir":"Articles","previous_headings":"Event identification > Filters","what":"Aggregate if overlapping","title":"user-guide","text":"event starts previous one ends, coalesced one larger event, can occur via fixed events filters.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter8","dir":"Articles","previous_headings":"Event identification > Filters","what":"Keep if N within X (sec)","title":"user-guide","text":"Keep event N occurring within X seconds ’s start time, excluding certain rate.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter9","dir":"Articles","previous_headings":"Event identification > Filters","what":"Include events before/after X (sec)","title":"user-guide","text":"Exclusion based timestamp.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-filter10","dir":"Articles","previous_headings":"Event identification > Filters","what":"Drop if within X (sec)","title":"user-guide","text":"event occurs within X seconds end previous, removed.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-normal","dir":"Articles","previous_headings":"Event identification","what":"Normalizations","title":"user-guide","text":"selection normalizations available, certain ones may appropriate particular circumstances. normalization applied data fall within bounds intervals defined event.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-z","dir":"Articles","previous_headings":"Event identification > Normalizations","what":"Z score","title":"user-guide","text":"Standard z score referenced baseline period.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-robust","dir":"Articles","previous_headings":"Event identification > Normalizations","what":"Robust Z","title":"user-guide","text":"robust z score-like value whose calculation median based. Slightly harder interpret.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-delta","dir":"Articles","previous_headings":"Event identification > Normalizations","what":"Delta-F over F","title":"user-guide","text":"change baseline calculation expressed percentage baseline value.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-intervals","dir":"Articles","previous_headings":"Event identification","what":"Intervals","title":"user-guide","text":"Intervals interest may assigned using table available event creation dialog defined : name, type interval (reference point), possibly start/end times.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-intervals-before1","dir":"Articles","previous_headings":"Event identification > Intervals","what":"Before event","title":"user-guide","text":"interval type referenced start event, setting start value negative number end value zero defines interval occurring directly prior actual event.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-intervals-before2","dir":"Articles","previous_headings":"Event identification > Intervals","what":"Before event, non-overlapping","title":"user-guide","text":"Similar , event’s interval defined using type happen overlap previous event (whether actual event interval defined post-event), shortened overlap.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-intervals-event","dir":"Articles","previous_headings":"Event identification > Intervals","what":"Event signal","title":"user-guide","text":"interval refers raw event signal defines given event post-filtering.","code":""},{"path":"https://mfbridge.github.io/FiPhA/articles/user-guide.html","id":"event-intervals-after","dir":"Articles","previous_headings":"Event identification > Intervals","what":"After event","title":"user-guide","text":"interval referenced end event, start time zero end time positive number defines interval occurring immediately event stops.","code":""},{"path":"https://mfbridge.github.io/FiPhA/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Matt Bridge. Maintainer.","code":""},{"path":"https://mfbridge.github.io/FiPhA/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Bridge M (2023). FiPhA: Fiber Photometry Analysis. R package version 1.0, https://mfbridge.github.io/FiPhA/.","code":"@Manual{,   title = {FiPhA: Fiber Photometry Analysis},   author = {Matt Bridge},   year = {2023},   note = {R package version 1.0},   url = {https://mfbridge.github.io/FiPhA/}, }"},{"path":"https://mfbridge.github.io/FiPhA/index.html","id":"fipha","dir":"","previous_headings":"","what":"Fiber Photometry Analysis","title":"Fiber Photometry Analysis","text":"FiPhA (Fiber Photometry Analysis) platform interactive dataset exploration, event visualization, summary analysis fiber photometry datasets neurobehavior experiments. Alongside variety data transformations, event series can defined sets named intervals interest relative given event signal, filters allow refinement variety normalizations standardizing individual responses. resulting event datasets can analyzed using built-statistical tools exported processing applications. Visualizations use plotly library, number configurable display options can saved click button. Entire sessions can saved later retrieval, datasets used processing exist data.table/data.frame objects central R object future reference even without application.","code":""},{"path":"https://mfbridge.github.io/FiPhA/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Fiber Photometry Analysis","text":"FiPhA developed using R v4.2.x RStudio v2023.x. can install latest development version directly GitHub using devtools package RStudio following commands:","code":"# install devtools if not already (or `remotes`) install.packages(\"devtools\")  # download and install FiPhA package branch from github devtools::install_github(\"mfbridge/FiPhA@pkg\")"},{"path":"https://mfbridge.github.io/FiPhA/index.html","id":"getting-started","dir":"","previous_headings":"","what":"Getting Started","title":"Fiber Photometry Analysis","text":"installed, FiPhA can started navigating entry within RStudio Addins menu. Alternatively, can started directly console entering r FiPhA::FiPhA().","code":""},{"path":"https://mfbridge.github.io/FiPhA/index.html","id":"updating","dir":"","previous_headings":"","what":"Updating","title":"Fiber Photometry Analysis","text":"Since project active development, users may update latest development version selecting appropriate entry RStudio Addins menu. operation just shortcut e-installing without upgrading dependency packages.","code":""},{"path":"https://mfbridge.github.io/FiPhA/index.html","id":"user-guide","dir":"","previous_headings":"","what":"User Guide","title":"Fiber Photometry Analysis","text":"See user guide details examples.","code":""},{"path":"https://mfbridge.github.io/FiPhA/index.html","id":"sample-data","dir":"","previous_headings":"","what":"Sample Data","title":"Fiber Photometry Analysis","text":"small sample fiber photometry datasets may loaded import menu.","code":""},{"path":"https://mfbridge.github.io/FiPhA/index.html","id":"acknowledgements","dir":"","previous_headings":"","what":"Acknowledgements","title":"Fiber Photometry Analysis","text":"work supported National Institute Environmental Health Sciences contract GS-00F-173CA-75N96021F00109 Social Scientific Systems, DLH Holdings Corp. Company.","code":""},{"path":"https://mfbridge.github.io/FiPhA/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Fiber Photometry Analysis","text":"See .","code":""}]
